var xe=Object.defineProperty;var pe=(r,a,l)=>a in r?xe(r,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[a]=l;var Y=(r,a,l)=>pe(r,typeof a!="symbol"?a+"":a,l);import{t as ge,m as je,n as G,o as fe,p as ve,r as h,u as W,s as q,q as y,v as A,j as e,D as Q,h as $,i as J,k as X,w as k,I as U,T as z,S as I,x as L,y as M,z as _,A as f,B as N,R as be,F as K,G as V,P as ye,H as we,J as w,K as Ne,M as Z,N as Ce,O as ke,C as B,Q as Te,U as ee,V as te,W as Se,X as De,Y as se,Z as ae,_ as Ee,$ as Pe,a0 as Fe,a1 as Ae,c as ne,d as re,e as Ie,f as le,a2 as Le,a3 as Me,a4 as _e}from"./index-Caw7KGCA.js";import{T as Oe}from"./trash-2-BDcWOCs6.js";import{C as Re,u as qe,a as Ge}from"./checkbox-C7iLtEjG.js";import{u as Ve,F as Ye,a as S,b as D,c as E,d as P,e as F,f as H}from"./form-CcKQMLHU.js";import{S as He}from"./settings-CUAoXI7l.js";function ze(r,a){var u,d;const l=je(),o=l.weekStartsOn??((d=(u=l.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,n=ge(r),t=n.getDay(),s=(t<o?-7:0)+6-(t-o);return n.setDate(n.getDate()+s),n.setHours(23,59,59,999),n}function Be(r){return G(r,fe(r))}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),ie=()=>{const[r,a]=h.useState([]),[l,o]=h.useState(!0),{user:n,isLoading:t}=W(),s=async()=>{if(t){console.log("useCalendarTasks: Auth still loading, waiting...");return}if(!(n!=null&&n.id)){console.log("useCalendarTasks: No user available, clearing tasks"),a([]),o(!1);return}console.log("useCalendarTasks: Fetching tasks for user:",n.id);try{const{data:i,error:c}=await q.from("calendar_tasks").select("*").eq("user_id",n.id).order("date",{ascending:!0});if(c)console.error("Error fetching calendar tasks:",c),y({title:"Error",description:"Failed to load calendar tasks",variant:"destructive"}),a([]);else{const m=(i||[]).map(g=>({...g,date:new Date(g.date),contentType:g.content_type}));console.log("useCalendarTasks: Successfully loaded tasks:",m.length),a(m)}}catch(i){console.error("Unexpected error fetching tasks:",i),y({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),a([])}finally{o(!1)}},u=async i=>{if(n!=null&&n.id)try{const{data:c,error:m}=await q.from("calendar_tasks").insert({user_id:n.id,title:i.title,description:i.description,date:i.date.toISOString().split("T")[0],platform:i.platform,content_type:i.content_type,points:i.points,completed:i.completed}).select().single();if(m){console.error("Error adding task:",m),y({title:"Error",description:"Failed to add task",variant:"destructive"});return}const g={...c,date:new Date(c.date),contentType:c.content_type};a(T=>[...T,g]),console.log("Calendar: Task added, triggering dashboard refresh events"),window.dispatchEvent(new CustomEvent("calendar_task_added",{detail:{task:g,timestamp:Date.now()}})),localStorage.setItem("calendar_task_added",JSON.stringify({timestamp:Date.now(),taskId:c.id,userId:n.id})),window.dispatchEvent(new CustomEvent("upcoming-posts-refresh")),y({title:"Success",description:"Task added successfully"})}catch(c){console.error("Unexpected error adding task:",c),y({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}},d=async i=>{if(n!=null&&n.id)try{const{error:c}=await q.from("calendar_tasks").update({title:i.title,description:i.description,date:i.date.toISOString().split("T")[0],platform:i.platform,content_type:i.content_type,points:i.points,completed:i.completed,updated_at:new Date().toISOString()}).eq("id",i.id).eq("user_id",n.id);if(c){console.error("Error updating task:",c),y({title:"Error",description:"Failed to update task",variant:"destructive"});return}a(m=>m.map(g=>g.id===i.id?i:g)),window.dispatchEvent(new CustomEvent("upcoming-posts-refresh")),y({title:"Success",description:"Task updated successfully"})}catch(c){console.error("Unexpected error updating task:",c),y({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}},x=async i=>{if(n!=null&&n.id)try{const{error:c}=await q.from("calendar_tasks").delete().eq("id",i).eq("user_id",n.id);if(c){console.error("Error deleting task:",c),y({title:"Error",description:"Failed to delete task",variant:"destructive"});return}a(m=>m.filter(g=>g.id!==i)),window.dispatchEvent(new CustomEvent("upcoming-posts-refresh")),y({title:"Success",description:"Task deleted successfully"})}catch(c){console.error("Unexpected error deleting task:",c),y({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}},p=async i=>{const c=r.find(m=>m.id===i);c&&await d({...c,completed:!0})};return h.useEffect(()=>{console.log("useCalendarTasks: Auth state changed - authLoading:",t,"user:",!!n),t||s()},[n==null?void 0:n.id,t]),{tasks:r,isLoading:l||t,addTask:u,updateTask:d,deleteTask:x,completeTask:p,refetch:s}};function We({open:r,onOpenChange:a,onAddTask:l,selectedDate:o}){const[n,t]=h.useState(""),[s,u]=h.useState(""),[d,x]=h.useState(""),[p,i]=h.useState(""),[c,m]=h.useState(o?A(o,"yyyy-MM-dd"):A(new Date,"yyyy-MM-dd")),[g,T]=h.useState(!1),O=async v=>{if(v.preventDefault(),!(!n||!d||!p||!c)){T(!0);try{await l({title:n,description:s||void 0,date:new Date(c),platform:d,content_type:p,points:10,completed:!1}),t(""),u(""),x(""),i(""),m(A(new Date,"yyyy-MM-dd")),a(!1)}catch(R){console.error("Error adding task:",R)}finally{T(!1)}}};return e.jsx(Q,{open:r,onOpenChange:a,children:e.jsxs($,{className:"sm:max-w-sm",children:[e.jsx(J,{children:e.jsx(X,{className:"text-lg",children:"Add Content"})}),e.jsxs("form",{onSubmit:O,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"title",className:"text-sm",children:"Title *"}),e.jsx(U,{id:"title",value:n,onChange:v=>t(v.target.value),placeholder:"Content title",required:!0,className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"description",className:"text-sm",children:"Description"}),e.jsx(z,{id:"description",value:s,onChange:v=>u(v.target.value),placeholder:"Content description",rows:2,className:"text-sm"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"date",className:"text-sm",children:"Date *"}),e.jsx(U,{id:"date",type:"date",value:c,onChange:v=>m(v.target.value),required:!0,className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm",children:"Platform *"}),e.jsxs(I,{value:d,onValueChange:x,required:!0,children:[e.jsx(L,{className:"h-8 text-sm",children:e.jsx(M,{placeholder:"Select platform"})}),e.jsxs(_,{children:[e.jsx(f,{value:"instagram",children:"Instagram"}),e.jsx(f,{value:"tiktok",children:"TikTok"}),e.jsx(f,{value:"youtube",children:"YouTube"}),e.jsx(f,{value:"twitter",children:"Twitter"}),e.jsx(f,{value:"linkedin",children:"LinkedIn"}),e.jsx(f,{value:"pinterest",children:"Pinterest"})]})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm",children:"Content Type *"}),e.jsxs(I,{value:p,onValueChange:i,required:!0,children:[e.jsx(L,{className:"h-8 text-sm",children:e.jsx(M,{placeholder:"Select content type"})}),e.jsxs(_,{children:[e.jsx(f,{value:"reel",children:"Reel"}),e.jsx(f,{value:"post",children:"Post"}),e.jsx(f,{value:"story",children:"Story"}),e.jsx(f,{value:"carousel",children:"Carousel"}),e.jsx(f,{value:"video",children:"Video"}),e.jsx(f,{value:"live",children:"Live"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>a(!1),className:"flex-1 h-8 text-sm",children:"Cancel"}),e.jsx(N,{type:"submit",disabled:!n||!d||!p||!c||g,className:"flex-1 h-8 text-sm",children:g?"Adding...":"Add Content"})]})]})]})})}const oe=be.memo(({currentDate:r,onDateChange:a,onAddTask:l})=>{const[o,n]=h.useState(!1),t=h.useCallback(async d=>{try{await l(d),n(!1)}catch(x){console.error("Error adding task:",x)}},[l]),s=K(r),u=ze(r);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-3 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-chichi-purple"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Content Calendar"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Week of ",A(s,"MMM d")," - ",A(u,"MMM d, yyyy")]})]})]}),e.jsxs(N,{onClick:()=>n(!0),className:"bg-chichi-purple hover:bg-chichi-purple/90 text-white shrink-0 text-sm py-1.5 px-3 h-8",size:"sm",children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),"Add Content"]})]}),e.jsx(We,{open:o,onOpenChange:n,onAddTask:t,selectedDate:r})]})});oe.displayName="ModernCalendarHeader";function Qe({currentDate:r,selectedDate:a,onDateSelect:l,tasks:o}){const n=K(r),t=Array.from({length:7},(u,d)=>we(n,d)),s=u=>o.filter(d=>G(new Date(d.date),u)).length;return e.jsx("div",{className:"flex justify-between items-center px-1.5 py-2 bg-white rounded-lg border border-gray-100 mb-2",children:t.map(u=>{const d=G(u,a),x=Be(u),p=s(u);return e.jsxs("button",{onClick:()=>l(u),className:w("flex flex-col items-center space-y-1 p-1 rounded-md transition-all duration-200","hover:bg-gray-50 min-w-[30px]",d&&"bg-chichi-purple text-white hover:bg-chichi-purple"),children:[e.jsx("span",{className:w("text-xs font-medium uppercase tracking-wide",d?"text-white":"text-gray-500"),children:A(u,"EEE").slice(0,1)}),e.jsx("div",{className:w("w-5 h-5 rounded-full flex items-center justify-center font-semibold text-xs","transition-all duration-200",d&&"bg-white text-chichi-purple",!d&&x&&"bg-chichi-purple-soft text-chichi-purple",!d&&!x&&"text-gray-900"),children:A(u,"d")}),p>0&&e.jsx("div",{className:w("w-1 h-1 rounded-full",d?"bg-white":"bg-chichi-orange")})]},u.toString())})})}function $e({id:r,title:a,description:l,platform:o,content_type:n,points:t,completed:s,onComplete:u,onEdit:d}){const x=i=>{const c={instagram:"bg-gradient-to-r from-pink-500 to-purple-500",tiktok:"bg-black",youtube:"bg-red-500",twitter:"bg-blue-400",linkedin:"bg-blue-600",facebook:"bg-blue-600",default:"bg-gray-500"};return c[i.toLowerCase()]||c.default},p=i=>{const c={post:"15 min",reel:"30 min",story:"10 min",video:"45 min",article:"60 min",tweet:"5 min",default:"20 min"};return c[i.toLowerCase()]||c.default};return e.jsxs("div",{className:w("bg-white rounded-lg p-2.5 border border-gray-100 shadow-sm","hover:shadow-md transition-all duration-200",s&&"bg-green-50 border-green-200"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:w("inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium text-white mb-1",x(o)),children:o}),e.jsx("h3",{className:"font-semibold text-sm text-gray-900 mb-0.5 line-clamp-1",children:a}),l&&e.jsx("p",{className:"text-gray-600 text-xs mb-1 line-clamp-1",children:l})]}),e.jsx("button",{onClick:d,className:"p-0.5 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-md transition-colors flex-shrink-0",children:e.jsx(Ue,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ne,{className:"w-3 h-3"}),e.jsx("span",{children:p(n)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-1 h-1 bg-chichi-orange rounded-full"}),e.jsxs("span",{children:[t," pts"]})]})]}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:n})]}),e.jsx("div",{className:"flex items-center justify-between",children:s?e.jsxs("div",{className:"flex items-center text-green-600 font-medium text-xs",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:"Completed"})]}):e.jsx("div",{className:"text-xs text-gray-500",children:"Scheduled"})})]})}const Je=({id:r,title:a,description:l,date:o,platform:n,contentType:t,points:s,completed:u,onComplete:d,onClick:x,className:p})=>{const[i,c]=h.useState(!1),[m,g]=h.useState(u),{completeTask:T}=W();h.useEffect(()=>{let j;return i&&(j=window.setTimeout(()=>{c(!1)},3e3)),()=>{j&&clearTimeout(j)}},[i]);const O=()=>{g(!0),d(r),T(),c(!0),setTimeout(()=>{const{dismiss:j}=y({title:"Task completed! 🎉",description:`You earned ${s} points for your ${t}!`});setTimeout(()=>{j()},5e3)},2e3)},v=new Date(o).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),R=j=>{const C={instagram:"bg-gradient-to-r from-pink-500 to-purple-500",tiktok:"bg-black",youtube:"bg-red-600",twitter:"bg-blue-400",linkedin:"bg-blue-700",facebook:"bg-blue-600",default:"bg-gray-500"};return C[j.toLowerCase()]||C.default},b=j=>{const C={post:"📱",reel:"🎬",story:"📸",video:"🎥",article:"📝",tweet:"💬",default:"📄"};return C[j.toLowerCase()]||C.default};return e.jsxs("div",{className:w("content-card relative",m?"border-green-200 bg-green-50":"",p),onClick:x,children:[e.jsx("div",{className:w("absolute top-0 right-0 px-3 py-1 text-xs font-medium text-white rounded-bl-lg rounded-tr-xl",R(n)),children:n}),e.jsx("div",{className:"flex items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-1",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:v})]}),e.jsxs("h3",{className:"font-semibold text-lg flex items-center",children:[e.jsx("span",{className:"mr-2",children:b(t)}),a]}),l&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm",children:e.jsxs("span",{className:"font-medium text-chichi-orange",children:[s," points"]})}),m?e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Completed"})]}):e.jsx(N,{onClick:j=>{j.stopPropagation(),O()},size:"sm",className:"bg-chichi-orange hover:bg-chichi-orange/90",children:"Mark Complete"})]})]})}),i&&e.jsx(Ce,{points:s,onComplete:()=>c(!1)})]})};function Xe({task:r,open:a,onOpenChange:l,onUpdate:o,onDelete:n}){const[t,s]=h.useState({...r}),[u,d]=h.useState(!1);h.useEffect(()=>{s({...r}),d(!1)},[r]);const x=()=>{o({...t,completed:!0}),l(!1)},p=()=>{d(!u)},i=()=>{n(r.id),l(!1),y({title:"Task deleted",description:"The task has been successfully removed."})},c=()=>{o(t),d(!1),y({title:"Changes saved",description:"Your task has been updated."})};return e.jsx(Q,{open:a,onOpenChange:l,children:e.jsxs($,{className:"sm:max-w-[500px]",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(X,{children:t.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:p,children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),u?"Cancel":"Edit"]}),!u&&e.jsxs(N,{variant:"destructive",size:"sm",onClick:i,children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})}),e.jsx("div",{className:"py-4",children:u?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"title",children:"Title"}),e.jsx("input",{id:"title",className:"w-full border rounded p-2",value:t.title,onChange:m=>s({...t,title:m.target.value})})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"description",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",className:"w-full border rounded p-2",rows:3,value:t.description||"",onChange:m=>s({...t,description:m.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"platform",children:"Platform"}),e.jsxs("select",{id:"platform",className:"w-full border rounded p-2",value:t.platform,onChange:m=>s({...t,platform:m.target.value}),children:[e.jsx("option",{value:"Instagram",children:"Instagram"}),e.jsx("option",{value:"TikTok",children:"TikTok"}),e.jsx("option",{value:"YouTube",children:"YouTube"}),e.jsx("option",{value:"Twitter",children:"Twitter"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Facebook",children:"Facebook"})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"contentType",children:"Content Type"}),e.jsxs("select",{id:"contentType",className:"w-full border rounded p-2",value:t.content_type,onChange:m=>s({...t,content_type:m.target.value}),children:[e.jsx("option",{value:"Post",children:"Post"}),e.jsx("option",{value:"Reel",children:"Reel"}),e.jsx("option",{value:"Story",children:"Story"}),e.jsx("option",{value:"Video",children:"Video"}),e.jsx("option",{value:"Article",children:"Article"}),e.jsx("option",{value:"Tweet",children:"Tweet"})]})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"points",children:"Points"}),e.jsx("input",{id:"points",type:"number",className:"w-full border rounded p-2",value:t.points,min:1,onChange:m=>s({...t,points:parseInt(m.target.value)})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(N,{onClick:c,children:"Save Changes"})]})]}):e.jsx(Je,{...t,contentType:t.content_type,onComplete:x,className:"shadow-none border-none"})})]})})}const Ke=[{value:"fitness-health",label:"Fitness & Health"},{value:"business-entrepreneurship",label:"Business & Entrepreneurship"},{value:"lifestyle-fashion",label:"Lifestyle & Fashion"},{value:"food-cooking",label:"Food & Cooking"},{value:"travel",label:"Travel"},{value:"technology",label:"Technology"},{value:"education-tutorials",label:"Education & Tutorials"},{value:"entertainment",label:"Entertainment"},{value:"art-design",label:"Art & Design"},{value:"personal-development",label:"Personal Development"},{value:"other",label:"Other"}],Ze=[{value:"instagram",label:"Instagram"},{value:"tiktok",label:"TikTok"},{value:"youtube",label:"YouTube"},{value:"twitter",label:"Twitter/X"},{value:"linkedin",label:"LinkedIn"},{value:"facebook",label:"Facebook"},{value:"multiple",label:"Multiple Platforms"}],et=[{value:"increase-engagement",label:"Increase engagement"},{value:"grow-followers",label:"Grow followers"},{value:"drive-sales",label:"Drive sales/conversions"},{value:"build-awareness",label:"Build brand awareness"},{value:"educate-audience",label:"Educate audience"},{value:"launch-product",label:"Launch new product/service"}],tt=[{value:"educational",label:"Educational posts"},{value:"behind-scenes",label:"Behind-the-scenes"},{value:"tips-tutorials",label:"Tips & tutorials"},{value:"personal-stories",label:"Personal stories"},{value:"product-showcases",label:"Product showcases"},{value:"ugc",label:"User-generated content"},{value:"trending-topics",label:"Trending topics"},{value:"qa-sessions",label:"Q&A sessions"}],st=[{value:"professional",label:"Professional & Authoritative"},{value:"friendly",label:"Friendly & Conversational"},{value:"fun",label:"Fun & Playful"},{value:"inspirational",label:"Inspirational & Motivational"},{value:"educational",label:"Educational & Informative"}];function at({onSubmit:r,isLoading:a,isQuotaExceeded:l}){const o=Ve({defaultValues:{contentNiche:"",platform:"",targetAudience:"",mainGoal:"",preferredContentTypes:[],brandTone:"",audienceChallenges:""},mode:"onSubmit"}),n=t=>{r(t)};return e.jsx(B,{className:"p-4",children:e.jsx(Ye,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(n),className:"space-y-4",children:[e.jsx(S,{control:o.control,name:"contentNiche",rules:{required:"Please select your content niche"},render:({field:t})=>e.jsxs(D,{children:[e.jsx(E,{className:"text-sm",children:"Content Niche"}),e.jsxs(I,{onValueChange:t.onChange,defaultValue:t.value,children:[e.jsx(P,{children:e.jsx(L,{className:"h-8 text-sm",children:e.jsx(M,{placeholder:"Select your content niche"})})}),e.jsx(_,{children:Ke.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]}),e.jsx(F,{})]})}),e.jsx(S,{control:o.control,name:"platform",rules:{required:"Please select your platform"},render:({field:t})=>e.jsxs(D,{children:[e.jsx(E,{className:"text-sm",children:"Platform"}),e.jsxs(I,{onValueChange:t.onChange,defaultValue:t.value,children:[e.jsx(P,{children:e.jsx(L,{className:"h-8 text-sm",children:e.jsx(M,{placeholder:"Select your main platform"})})}),e.jsx(_,{children:Ze.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]}),e.jsx(F,{})]})}),e.jsx(S,{control:o.control,name:"targetAudience",rules:{required:"Please describe your target audience"},render:({field:t})=>e.jsxs(D,{children:[e.jsx(E,{className:"text-sm",children:"Target Audience"}),e.jsx(P,{children:e.jsx(z,{placeholder:"Describe your target audience - who are they, what are their interests, demographics, etc.",className:"min-h-[60px] text-sm",...t})}),e.jsx(H,{className:"text-xs",children:"Be specific about who you create content for"}),e.jsx(F,{})]})}),e.jsx(S,{control:o.control,name:"mainGoal",rules:{required:"Please select your main goal"},render:({field:t})=>e.jsxs(D,{children:[e.jsx(E,{className:"text-sm",children:"Main Goal"}),e.jsxs(I,{onValueChange:t.onChange,defaultValue:t.value,children:[e.jsx(P,{children:e.jsx(L,{className:"h-8 text-sm",children:e.jsx(M,{placeholder:"What's your primary goal?"})})}),e.jsx(_,{children:et.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]}),e.jsx(F,{})]})}),e.jsx(S,{control:o.control,name:"preferredContentTypes",render:()=>e.jsxs(D,{children:[e.jsx(E,{className:"text-sm",children:"Preferred Content Types"}),e.jsx(H,{className:"text-xs",children:"Select the types of content you like to create (optional)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1",children:tt.map(t=>e.jsx(S,{control:o.control,name:"preferredContentTypes",render:({field:s})=>{var u;return e.jsxs(D,{className:"flex flex-row items-start space-x-2 space-y-0",children:[e.jsx(P,{children:e.jsx(Re,{checked:(u=s.value)==null?void 0:u.includes(t.value),onCheckedChange:d=>{var x;return d?s.onChange([...s.value,t.value]):s.onChange((x=s.value)==null?void 0:x.filter(p=>p!==t.value))}})}),e.jsx(E,{className:"font-normal text-xs",children:t.label})]},t.value)}},t.value))}),e.jsx(F,{})]})}),e.jsx(S,{control:o.control,name:"brandTone",rules:{required:"Please select your brand tone"},render:({field:t})=>e.jsxs(D,{children:[e.jsx(E,{className:"text-sm",children:"Brand Tone"}),e.jsxs(I,{onValueChange:t.onChange,defaultValue:t.value,children:[e.jsx(P,{children:e.jsx(L,{className:"h-8 text-sm",children:e.jsx(M,{placeholder:"How do you communicate with your audience?"})})}),e.jsx(_,{children:st.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]}),e.jsx(F,{})]})}),e.jsx(S,{control:o.control,name:"audienceChallenges",rules:{required:"Please describe your audience's challenges"},render:({field:t})=>e.jsxs(D,{children:[e.jsx(E,{className:"text-sm",children:"Audience Challenges"}),e.jsx(P,{children:e.jsx(z,{placeholder:"What problems or challenges does your audience face that your content can help solve?",className:"min-h-[60px] text-sm",...t})}),e.jsx(H,{className:"text-xs",children:"Understanding their pain points helps create more targeted content"}),e.jsx(F,{})]})}),e.jsx(N,{type:"submit",disabled:a||l,className:"flex gap-2 items-center w-full h-8 text-sm",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-3 w-3 animate-spin"}),"Generating Your 7-Day Plan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-3 w-3"}),"Generate My 7-Day Content Plan"]})})]})})})}const nt=Fe,rt=Ae,lt=Ee,ce=h.forwardRef(({className:r,...a},l)=>e.jsx(ee,{className:w("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:l}));ce.displayName=ee.displayName;const it=Pe("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),de=h.forwardRef(({side:r="right",className:a,children:l,...o},n)=>e.jsxs(lt,{children:[e.jsx(ce,{}),e.jsxs(te,{ref:n,className:w(it({side:r}),a),...o,children:[l,e.jsxs(Se,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));de.displayName=te.displayName;const ue=({className:r,...a})=>e.jsx("div",{className:w("flex flex-col space-y-2 text-center sm:text-left",r),...a});ue.displayName="SheetHeader";const me=h.forwardRef(({className:r,...a},l)=>e.jsx(se,{ref:l,className:w("text-lg font-semibold text-foreground",r),...a}));me.displayName=se.displayName;const he=h.forwardRef(({className:r,...a},l)=>e.jsx(ae,{ref:l,className:w("text-sm text-muted-foreground",r),...a}));he.displayName=ae.displayName;function ot(){const{generateContentPlan:r,...a}=qe();ie();const[l,o]=h.useState(!1),n=s=>{const u={audience:s.targetAudience,business:`${s.contentNiche} content creator`,contentGoal:s.mainGoal,preferredFormats:s.preferredContentTypes,platforms:[s.platform]};r(u),o(!1)},t=()=>{o(!0)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(B,{className:"border border-chichi-purple/20",children:[e.jsxs(ne,{className:"pb-3",children:[e.jsxs(re,{className:"text-lg flex items-center",children:[e.jsx(V,{className:"mr-2 h-5 w-5 text-chichi-orange"}),"AI Content Generator"]}),e.jsx(Ie,{children:"Generate a strategic 7-day content plan with AI assistance"})]}),e.jsxs(le,{className:"space-y-3",children:[e.jsxs(nt,{open:l,onOpenChange:o,children:[e.jsx(rt,{asChild:!0,children:e.jsxs(N,{disabled:a.isLoading,variant:"default",className:"w-full",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Generate Custom Content Plan"]})}),e.jsxs(de,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Create Your Custom Content Plan"}),e.jsx(he,{children:"Fill out the form below to generate a personalized 7-day content strategy"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(at,{onSubmit:n,isLoading:a.isLoading,isQuotaExceeded:a.isQuotaExceeded})})]})]}),a.isQuotaExceeded&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"✨ You've reached your daily AI generation limit. More generations available tomorrow!"})})]})]}),a.contentPlan&&e.jsx(Ge,{contentPlan:a.contentPlan,onTryAgain:t,isLoading:a.isLoading,isQuotaExceeded:a.isQuotaExceeded})]})}class ct extends h.Component{constructor(l){super(l);Y(this,"handleReload",()=>{window.location.reload()});Y(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,o){console.error("PageErrorBoundary caught an error:",l,o)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(B,{className:"max-w-md w-full",children:[e.jsx(ne,{children:e.jsxs(re,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Le,{className:"h-5 w-5"}),"Something went wrong"]})}),e.jsxs(le,{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"This page encountered an error and couldn't load properly."}),this.state.error&&e.jsxs("details",{className:"text-sm bg-gray-50 p-2 rounded",children:[e.jsx("summary",{className:"cursor-pointer font-medium",children:"Error details"}),e.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-xs",children:this.state.error.message})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:this.handleReset,variant:"outline",className:"flex-1",children:"Try Again"}),e.jsxs(N,{onClick:this.handleReload,className:"flex-1",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Reload Page"]})]})]})]})}):this.props.children}}const gt=()=>{const{tasks:r,isLoading:a,addTask:l,updateTask:o,deleteTask:n,completeTask:t}=ie(),[s,u]=h.useState(new Date),[d,x]=h.useState(new Date),[p,i]=h.useState(null),[c,m]=h.useState(!1),[g,T]=_e();console.log("Calendar: Rendering, isLoading:",a,"tasks count:",r.length),h.useEffect(()=>{const b=g.get("edit");if(b&&r.length>0){const j=r.find(C=>C.id===b);j&&(i(j),m(!0),x(new Date(j.date)),T(C=>(C.delete("edit"),C)))}},[g,r,T]);const O=async b=>{await t(b),y({title:"Task completed! 🎉",description:"Great work! You're making progress on your content goals."})},v=r.filter(b=>G(new Date(b.date),d)),R=b=>{i(b),m(!0)};return a?e.jsx("div",{className:"min-h-screen bg-gray-50 p-2 md:p-4 pb-20 md:pb-6",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded-lg w-48"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Array.from({length:3}).map((b,j)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded-lg"},j))})]})})}):e.jsx(ct,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-2 md:p-4 pb-20 md:pb-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx(oe,{currentDate:s,onDateChange:u,onAddTask:l}),e.jsx(Qe,{currentDate:s,selectedDate:d,onDateSelect:x,tasks:r}),e.jsx(ot,{}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-gray-900 mb-2",children:v.length>0?`${v.length} content ${v.length===1?"piece":"pieces"} scheduled`:"No content scheduled"}),v.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2",children:v.map(b=>e.jsx($e,{...b,onComplete:O,onEdit:()=>R(b)},b.id))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"📅"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No content scheduled"}),e.jsx("p",{className:"text-gray-500 text-xs max-w-sm mx-auto",children:"Add your first content piece to start planning your content for this day."})]})]}),p&&e.jsx(Xe,{task:p,open:c,onOpenChange:m,onUpdate:o,onDelete:n})]})})})};export{gt as default};
